<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
    Vue前端项目打包成exe文件总结文档 - 
    
    </title>
    

    
    
    <link href="atom.xml" rel="alternate" title="" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/style.min.css">
    <link rel="stylesheet" href="asset/css/doc.css">
    <script src="asset/app.js"></script>
</head>
  <body>
    <section class="hero">
      <div class="hero-head">
          <nav class="navbar" role="navigation" aria-label="main navigation">
              <div class="container">
              <div class="navbar-brand">
                
                <a target="_self" class="navbar-item " href="index.html">Home</a>
                
                <a target="_self" class="navbar-item " href="archives.html">Archives</a>
                

                <a role="button" id="navbarSNSRssSwitchBtn" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarSNSRssButtons">
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                </a>
              </div>
            
              <div id="navbarSNSRssButtons" class="navbar-menu">
                <div class="navbar-start">
                  
                </div>
            
                <div class="navbar-end">
                  <div class="navbar-item">
                    <!--buttons start-->
                    <div class="buttons">
                      
                        
                        
                        
                        
                      
                      <a href="atom.xml" target="_blank" title="RSS">
                          <span class="icon is-large has-text-black-bis">
                              <svg class="svg-inline--fa fa-rss fa-w-14 fa-lg" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg><!-- <i class="fas fa-rss fa-lg"></i> -->
                          </span>
                      </a>
                    </div>
                    <!--buttons end-->

                  </div>
                </div>
                </div>
              </div>
            </nav>
      </div>

 <div class="hero-body ct-body"></div>
      
    </section>
    <section class="ct-body">
      <div class="container">
          <div class="columns is-variable bd-klmn-columns is-4 is-centered">
              <div class="column is-four-fifths">
                  <div class="post-body single-content">
                    
                    <h1 class="title">
                            Vue前端项目打包成exe文件总结文档   
                      </h1>
                     
                    
                      <div class="media">
                            
                            <div class="media-content">
                              <div class="content">
                                <p>
                                 <span class="date">2022/12/07</span>
                                  <span class="tran-posted-in">posted in</span>&nbsp; 
                                  
                                      <span class="posted-in"><a href='%E6%89%93%E5%8C%85%E9%83%A8%E7%BD%B2.html'>打包部署</a></span>
                                         
                                  

                                   
                                      
                                  <br />
                                  <span class="tran-tags">Tags:</span>&nbsp;
                                     

                                </p>
                              </div>
                            </div>
                         
                    </div>
                </div>
                  <article class="markdown-body single-content">
                    <ul>
<li><a href="#electron-app%E6%96%B9%E6%A1%88">Electron App方案</a>
<ul>
<li><a href="#vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85dist%E6%96%87%E4%BB%B6">Vue项目打包dist文件</a>
<ul>
<li><a href="#%E8%B7%AF%E7%94%B1%E4%BD%BF%E7%94%A8hash%E6%A8%A1%E5%BC%8F">路由使用hash模式</a></li>
<li><a href="#vue-config-js%E4%BF%AE%E6%94%B9">vue.config.js 修改</a></li>
</ul>
</li>
<li><a href="#%E5%88%9B%E5%BB%BAelectron%E9%A1%B9%E7%9B%AE%E5%AE%98%E7%BD%91%E7%A4%BA%E4%BE%8B">创建Electron项目(官网示例)</a>
<ul>
<li><a href="#%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87">前置准备</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E5%92%8C%E5%AE%89%E8%A3%85electron">创建打包项目文件和安装Electron</a></li>
<li><a href="#%E5%9C%A8%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BAmain-js">在项目根目录下创建main.js</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9main-js%E4%B8%AD%E7%BD%91%E9%A1%B5%E6%96%87%E4%BB%B6%E7%9A%84%E8%B7%AF%E5%BE%84">修改main.js中网页文件的路径</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA%E9%A2%84%E5%8A%A0%E8%BD%BD%E8%84%9A%E6%9C%ACprelaod-js">项目根目录下创建预加载脚本prelaod.js</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9package-json%E2%80%8B%E7%A8%8B%E5%BA%8F%E5%85%A5%E5%8F%A3">修改 package.json​ 程序入口</a></li>
<li><a href="#%E6%89%93%E5%8C%85%E5%B9%B6%E5%88%86%E5%8F%91%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F">打包并分发应用程序</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#electron-quick-start%E6%96%B9%E6%A1%88">electron-quick-start 方案</a></li>
<li><a href="#%E5%B0%86exe%E7%9B%AE%E5%BD%95%E6%89%93%E5%8C%85%E6%88%90setup-exe">将exe目录打包成Setup.exe</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
<p>最近项目上有需求，需要将Vue开发的前端项目打包成exe文件在Windows系统上使用，原因是它只是一个简单的页面，客户要放在终端机上使用，不想在浏览器中打开。通过在网上查阅了一些资料，耗费了几个小时，踩了不少坑，终于是把流程走通了，特此记录！总的来说，有2个方案，都需要使用 electron 这个库，下面分别详细说明。</p>
<h1><a id="electron-app%E6%96%B9%E6%A1%88" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Electron App方案</h1>
<p>Electron App 方案指的是按照官网快速使用的说明，自己创建一个空项目，一步一步完成目标。</p>
<h2><a id="vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85dist%E6%96%87%E4%BB%B6" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Vue项目打包dist文件</h2>
<h3><a id="%E8%B7%AF%E7%94%B1%E4%BD%BF%E7%94%A8hash%E6%A8%A1%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>路由使用hash模式</h3>
<pre><code class="language-js">// 例如：注释掉history
const router = new VueRouter({
  // mode: 'history',
  routes
})

// 例如：下面这个用vue-cli创建的默认router/index.js文件也是可以的，它是 hash 模式
import { createRouter, createWebHashHistory } from 'vue-router'
import Register from '@/pages/register/index.vue'

const routes = [
    {
        path: '/',
        name: 'register',
        component: Register
    }
]

const router = createRouter({
    history: createWebHashHistory(),
    routes
})

export default router
</code></pre>
<h3><a id="vue-config-js%E4%BF%AE%E6%94%B9" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>vue.config.js 修改</h3>
<p>主要是修改 publicPash 为相对路径，vue-cli 创建的项目 vue.config.js 的puclicPath默认是根路径。</p>
<pre><code class="language-js">// vue-cli 创建的项目 vue.config.js 的puclicPath默认不是相对路径，而是根路径。
const { resolve } = require('path')
module.exports = {
    assetsDir: 'static',
    devServer: {
        port: 8000,
        open: true
    },
    lintOnSave: false,
    // 打包成exe文件这个必有
    publicPath: './',
    // publicPath: process.env.NODE_ENV === 'production'
    //     ? '/production-sub-path/'
    //     : '/',
    configureWebpack: {
        resolve: {
            alias: {
                // 以@代表src目录
                '@': resolve('src')
            }
        }
    }
}


//---------------下面是我的项目 vue.config.js 配置------------------------------
const { defineConfig } = require('@vue/cli-service')
const defConfig = defineConfig({
    transpileDependencies: true
})
const isProd = process.env.NODE_ENV === 'production'

module.exports = {
    ...defConfig,
    // 基本路径
    publicPath: './',
    // 输出文件目录
    // outputDir: 'dist',
    // eslint-loader 是否在保存的时候检查
    lintOnSave: false,
    // 放置生成的静态资源 (js、css、img、fonts) 的 (相对于 outputDir 的) 目录。
    assetsDir: 'static',
    css: {
        // 是否使用css分离插件
        extract: isProd,
        // 开启 CSS source maps，一般不建议开启
        sourceMap: false,
        // css预设器配置项
        loaderOptions: {
            sass: {
                // 设置css中引用文件的路径，引入通用使用的scss文件（如包含的@mixin）
                additionalData: `
                    $baseUrl: &quot;/&quot;;
                    @import '~@/assets/styles/mixin.scss';
                `
            }
        }
    },
    // webpack-dev-server 相关配置 https://webpack.js.org/configuration/dev-server/
    devServer: {
        headers: {
            'Access-Control-Allow-Origin': '*'
        },
        host: 'localhost',
        port: 8200, // 端口号
        https: false, // https:{type:Boolean}
        open: true, // 配置自动启动浏览器
        hot: true, // 热更新
        proxy: {
             &quot;/api&quot;: {
                 target: &quot;http://localhost:8600&quot;,
                 changeOrigin: true,
                 ws: true,
                 pathRewrite: {
                     &quot;^/api&quot;: &quot;/smart&quot;
                 }
            }
        }
    }
}

</code></pre>
<h2><a id="%E5%88%9B%E5%BB%BAelectron%E9%A1%B9%E7%9B%AE%E5%AE%98%E7%BD%91%E7%A4%BA%E4%BE%8B" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>创建Electron项目(官网示例)</h2>
<h3><a id="%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>前置准备</h3>
<p>在创建 Electron项目时，需要下载一些依赖，如: electron、@electron-forge/cli、electron-forge 等等。直接用 npm 下载由于国内网络环境的原因，可能下载失败。所以务必安装一下 cnpm，并且对 github.com 域名做一个本地化hotst配置。</p>
<ol>
<li>
<p>安装 cnpm</p>
<pre><code class="language-shell"># 安装 cnpm
npm install -g cnpm --registry=https://registry.npm.taobao.org

# 其它相关命令，cnpm 和 npm 相关命令完全一样
cnpm config ls
cnpm -v
cnpm i

# 补充：官网也提供了一个解决此类问题的方案，设置环境变量
# 设置npm electron默认安装路径的环境变量，能大概率解决electron安装缓慢或卡顿
npm config set ELECTRON_MIRROR  http://npmmirror.com/mirrors/electron/

# 删除变量
npm config delete ELECTRON_MIRROR

# 查看npm 变量
npm config ls
</code></pre>
</li>
<li>
<p>配置github.com域名hosts文件<br />
它主要是解决这个问题（<a href="https://blog.csdn.net/weixin_46329670/article/details/128200106">全局安装electron时出现 node install.js RequestError: connect ETIMEDOUT 182.43.124.6:443，解决办法</a>）。<br />
到网站：<a href="https://ping.chinaz.com/github.com">https://ping.chinaz.com/github.com</a> 中查询一个访问较快的ip地址。<br />
<img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786879.jpg" alt="" /><br />
<img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786904.jpg" alt="" /><br />
修改hosts文件，将选取的ip地址添加到最后一行。</p>
<pre><code class="language-shell">C:\Windows\System32\drivers\etc
</code></pre>
<p><img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786921.jpg" alt="" /><br />
配置完毕，下次访问github时，域名解析器就会从140这个地址取访问。</p>
</li>
<li>
<p>手动下载electron放入node_modules方案<br />
解决网络问题导致 electron 依赖下载失败还有一个解决办法（我没有亲测过），就是手动下载依赖包，然后放到本地的 node_modules 中。具体做法如下：<br />
通过下面的链接，去下载你想要的版本的electron压缩包<br />
（我的电脑是Windows，node版本是16.16.0，下载的包是：electron-v21.3.3-win32-x64.zip）</p>
<pre><code class="language-js">https://registry.npmmirror.com/binary.html?path=electron/
</code></pre>
<p>如果你不知道自己应该下载哪个版本的electron压缩包，可以在以下链接查看node版本对应的electron版本</p>
<pre><code class="language-js">https://releases.electronjs.org/
</code></pre>
<p><img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786938.jpg" alt="" /></p>
<p>压缩包下载完成之后，进入项目目录你的项目node_modules/electron<br />
例如 electron-quick-start/node_modules/electron，<br />
在 node_modules/electron 下新建文件夹 dist，将刚下载的压缩包解压到dist文件夹中。<br />
新建文件path.txt，根据自己的系统类型输入：</p>
<pre><code class="language-shell">windows系统输入： electron.exe
mac系统输入：Electron.app/Contents/MacOS/Electron
linux系统输入：electron
</code></pre>
<blockquote>
<p>注：electron依赖中有path.txt文件和dist文件夹，就不会再去下载这个依赖了。</p>
</blockquote>
<p>然后在项目中执行npm start，项目即可正常跑起来<br />
<img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786953.jpg" alt="" /></p>
</li>
</ol>
<h3><a id="%E5%88%9B%E5%BB%BA%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E5%92%8C%E5%AE%89%E8%A3%85electron" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>创建打包项目文件和安装Electron</h3>
<pre><code class="language-shell">mkdir my-electron-app &amp;&amp; cd my-electron-app
npm init -y
npm i --save-dev electron
</code></pre>
<h3><a id="%E5%9C%A8%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BAmain-js" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>在项目根目录下创建main.js</h3>
<p>主脚本指定了运行主进程的 Electron 应用程序的入口(对我们而言，是 main.js 文件)。 通常，在主进程中运行的脚本控制应用程序的生命周期、显示图形用户界面及其元素、执行本机操作系统交互以及在网页中创建渲染进程。 Electron 应用程序只能有一个主进程</p>
<pre><code class="language-js">// 从electron包中导入app,BrowserWindow模块
const { app, BrowserWindow } = require('electron')
// 导入path包，该包为操作文件路径提供了实用的功能
const path = require('path')

function createWindow () {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })
// 修改网页文件路径
  win.loadFile('index.html')
}

app.whenReady().then(() =&gt; {
// 通过调用 createWindow方法，在 electron app 第一次被初始化时创建了一个新的窗口
  createWindow()
// 添加一个新的侦听器，只有当应用程序激活后没有可见窗口时，才能创建新的浏览器窗口。
  app.on('activate', () =&gt; {
    if (BrowserWindow.getAllWindows().length === 0) {
      createWindow()
    }
  })
})
// 添加了一个新的侦听器，当应用程序不再有任何打开窗口时试图退出
app.on('window-all-closed', () =&gt; {
  if (process.platform !== 'darwin') {
    app.quit()
  }
})
</code></pre>
<h3><a id="%E4%BF%AE%E6%94%B9main-js%E4%B8%AD%E7%BD%91%E9%A1%B5%E6%96%87%E4%BB%B6%E7%9A%84%E8%B7%AF%E5%BE%84" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>修改main.js中网页文件的路径</h3>
<p>将前面 一中打包的dist文件放到electron项目根目录中，并更改main.js中的win.loadFile()路径。</p>
<pre><code class="language-js">// 修改网页文件路径
win.loadFile('./dist/index.html')
</code></pre>
<h3><a id="%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA%E9%A2%84%E5%8A%A0%E8%BD%BD%E8%84%9A%E6%9C%ACprelaod-js" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>项目根目录下创建预加载脚本prelaod.js</h3>
<p>​ 预加载脚本(在本例中是preload.js 文件)充当Node.js 和您的网页之间的桥梁。 它允许你将特定的 API 和行为暴露到你的网页上，而不是危险地把整个 Node.js 的 API暴露。 在本例中，我们将使用预加载脚本从process对象读取版本信息，并用该信息更新网页<br />
​</p>
<pre><code class="language-js">// 第 1 行：首先定义了一个事件监听器，当web页面加载完成后通知你。
// 第 2 行：接着您定义了一个功能函数用来为index.html中的所有placeholder设置文本。
// 第 7 行：接下来您遍历了您想展示版本号的组件列表。
// 第 8 行：最终，您调用 replaceText 来查找index.html中的版本占位符并将其文本值设置为process.versions的值。
window.addEventListener('DOMContentLoaded', () =&gt; {
  const replaceText = (selector, text) =&gt; {
    const element = document.getElementById(selector)
    if (element) element.innerText = text
  }

  for (const type of ['chrome', 'node', 'electron']) {
    replaceText(`${type}-version`, process.versions[type])
  }
})

</code></pre>
<p>​</p>
<h3><a id="%E4%BF%AE%E6%94%B9package-json%E2%80%8B%E7%A8%8B%E5%BA%8F%E5%85%A5%E5%8F%A3" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>修改 package.json​ 程序入口</h3>
<p>​ Electron 应用程序使用 package.json 文件作为主入口(像任何其它的 Node.js 应用程序)。 您的应用程序的主脚本是 main.js，所以相应修改 package.json 文件。 npm init -y 出来的项目，main 入口默认不是 main.js 而是 index.js，所以这里要修改。<br />
​</p>
<pre><code class="language-json">​{
    &quot;name&quot;: &quot;my-electron-app&quot;,
    &quot;version&quot;: &quot;0.1.0&quot;,
    &quot;author&quot;: &quot;your name&quot;,
    &quot;description&quot;: &quot;My Electron app&quot;,
    &quot;main&quot;: &quot;main.js&quot;,
    &quot;scripts&quot;: {
        &quot;start&quot;: &quot;electron .&quot;
    }
}
</code></pre>
<p>完成修改后，可以用：npm start 运行项目,查看效果​</p>
<h3><a id="%E6%89%93%E5%8C%85%E5%B9%B6%E5%88%86%E5%8F%91%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>打包并分发应用程序</h3>
<pre><code class="language-shell">//1、导入Electro Forge到应用文件夹
npm install --save-dev @electron-forge/cli
npx electron-forge import

//2、创建分发版本
npm run make

</code></pre>
<p>执行make命令后，在 electron-app 根目录下会生成out目录，里边包含了我们需要的 exe 文件。其中 electron-app-win32-x64 是一个包含 exe 的目录，make 下则是 Setup.exe 安装包。使用这两个里边的任意一种都可以，不过一般 Setup.exe 更加方便一些。</p>
<p><img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786968.png" alt="electron-app" /></p>
<p><img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786981.png" alt="electron-app2" /></p>
<h1><a id="electron-quick-start%E6%96%B9%E6%A1%88" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>electron-quick-start 方案</h1>
<p>官方github提供了一个quick-start项目，我们可以直接拿过来用。</p>
<ol>
<li>
<p>克隆官方demo<br />
拉取electron官网上的demo，拉下来之后安装依赖，项目跑起来之后，就不用管demo了，开始配置自己的Vue项目。这里安装依赖的时候就需要使用之前的前置准备工作的 cnpm，不然可能会下载不下来。</p>
<pre><code class="language-shell">git clone https://github.com/electron/electron-quick-start
cnpm i
cnpm run start
</code></pre>
</li>
<li>
<p>修改vue.config.js<br />
这一步和 Electron App 方案一样，是必须的。修改自己项目的 vue.config.js，路径必须修改为 ./，否则后续打包好的页面可能会出现白屏，加载不出来的情况。</p>
<pre><code class="language-js">module.exports = {   
	publicPath: './',   
} 
</code></pre>
</li>
<li>
<p>打包Vue项目</p>
<pre><code class="language-shell">npm run build
</code></pre>
</li>
<li>
<p>下载 electron-packager</p>
<pre><code class="language-shell">cnpm install electron-packager --save-dev
</code></pre>
</li>
<li>
<p>进入electron-quick-start项目，删除项目根目录下的 index.html 文件</p>
</li>
<li>
<p>在 electron-quick-start 项目中找到入口文件 main.js ，修改打包的文件路径为我们的 index.html</p>
<pre><code class="language-js">// main.js 原始内容 
mainWindow.loadFile('index.html') 
// 修改后的内容 
mainWindow.loadFile('./dist/index.html')
</code></pre>
</li>
<li>
<p>在electron-quick-start项目中，进入 package.json ，在 scripts 中添加 packager 指令，如下所示：</p>
<pre><code class="language-js">&quot;scripts&quot;: { 
    &quot;start&quot;: &quot;electron .&quot;, 
    &quot;packager&quot;: &quot;electron-packager ./ App --platform=win32 --arch=x64 --overwrite&quot;
} 

// 更多参数含义
// electron-packager &lt;路径(.代表根目录)&gt; &lt;可执行文件的文件名&gt; –win=x32&lt;系统&gt; –out &lt;打包成的文件夹名&gt; –arch=x64 –app-version=0.0.1&lt;应用版本&gt; –electron-version=2.0.0&lt;使用electron的版本&gt;
&quot;packager&quot;: &quot;electron-packager . HelloWorld --platform=win32 --arch=x64 --icon=icon.ico --out=./out --asar --app-version=0.0.1&quot;
</code></pre>
</li>
<li>
<p>运行命令打包，然后项目中会出现一个 App-win32-x64 的文件夹，这个文件就是打包好的桌面应用，文件夹里有一个 App.exe 文件，App.exe 就是这个项目的启动文件。</p>
<pre><code class="language-shell">npm run packager 
</code></pre>
<blockquote>
<p>这一步如果不做 github 本地 hosts 配置，可能会报网络连接超时错误。</p>
</blockquote>
<p>打包完以后，项目中会出现 App-win32-x64文件夹，进去之后，双击App.exe就可以访问了。<br />
<img src="http://yuanchaowhut.oss-cn-hangzhou.aliyuncs.com/2022/12/08/16704383786994.png" alt="electroon-quick-start" /></p>
</li>
</ol>
<h1><a id="%E5%B0%86exe%E7%9B%AE%E5%BD%95%E6%89%93%E5%8C%85%E6%88%90setup-exe" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>将exe目录打包成Setup.exe</h1>
<ol>
<li>
<p>安装 electron-winstaller</p>
<pre><code class="language-shell">npm install --save-dev electron-winstaller
</code></pre>
</li>
<li>
<p>在根目录下创建 build.js 文件</p>
<pre><code class="language-js">// build.js
var electronInstaller = require('electron-winstaller');
var path = require(&quot;path&quot;);

resultPromise = electronInstaller.createWindowsInstaller({
  appDirectory: path.join('./out/HelloWorld-win32-x64'), //入口
  outputDirectory: path.join('./installer/installer64'),     //出口
  authors: 'yuanchao',
  exe: &quot;HelloWorld.exe&quot;,        // 目录中 .exe 文件的名称
  setupIcon: path.join('icon.ico'), //安装图标，必须本地
  iconUrl: 'http://pm72qibzx.bkt.clouddn.com/icon.ico', //程序图标，必须url
  noMsi: true,
});

resultPromise.then(() =&gt; console.log(&quot;It worked!&quot;), (e) =&gt; console.log(`No dice: ${e.message}`));
</code></pre>
</li>
<li>
<p>执行build.js文件，至此，可以生成安装包setup.exe</p>
<pre><code class="language-shell">node build.js
</code></pre>
</li>
<li>
<p>安装成功之后，自动添加快捷方式</p>
<pre><code class="language-shell">npm i electron-squirrel-startup --save
</code></pre>
<p>在main.js中添加代码</p>
<pre><code class="language-js">if(require('electron-squirrel-startup')) return; 
</code></pre>
<pre><code class="language-shell">npm run packager

node build.js
</code></pre>
</li>
</ol>
<h1><a id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>参考资料</h1>
<p><a href="https://blog.csdn.net/weixin_42536125/article/details/117014194">1、Vue前端项目打包成exe</a><br />
<a href="https://zhuanlan.zhihu.com/p/59765568">2、将Vue项目打包为Windows应用</a><br />
<a href="https://blog.csdn.net/includei/article/details/112623234">3、解决npx @electron-forge/cli import时提示缺失依赖</a><br />
<a href="https://blog.csdn.net/weixin_46329670/article/details/128200106">4、全局安装electron时出现 node install.js RequestError: connect ETIMEDOUT 182.43.124.6:443，解决办法</a><br />
<a href="https://juejin.cn/post/7135792245067759653">5、使用npm安装electron及electron-forge安装中出现的卡顿、缓慢、报错问题的个人解决办法</a><br />
<a href="https://blog.csdn.net/m0_46183499/article/details/121231949">6、Vue项目打包成exe可执行文件（无瑕疵，完美版）</a><br />
<a href="https://www.jianshu.com/p/1752d00b095f">7、electron打包桌面应用/打包成安装包/自动添加桌面快捷方式</a><br />
<a href="https://www.jianshu.com/p/1c2ad78df208">8、常用Electron App 打包工具</a></p>

                  </article>
                  <div class="comments-wrap">
                    <div class="share-comments">
                      

                      

                      
                    </div>
                  </div><!-- end comments wrap -->
              </div>
            </div><!-- end columns -->
      </div><!-- end container -->
    </section>



    <footer class="footer">
        <div class="content has-text-centered">
          <p>
              Copyright &copy; 2019
              Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
              Theme used <a target="_blank" href="https://bulma.io/">Bulma CSS</a>.
          </p>
        </div>
      </footer>



  













<script src="asset/prism.js"></script>



  
    




  </body>
</html>
